parameters:
    clickcounter.class: Dothiv\BusinessBundle\Service\ClickCounterConfig
    dothiv.businessbundle.service.clock.class: Dothiv\BusinessBundle\Service\Clock
    dothiv.businessbundle.service.user.class: Dothiv\BusinessBundle\Service\UserService
    dothiv.businessbundle.service.attachment.class: Dothiv\BusinessBundle\Service\AttachmentService
    dothiv.businessbundle.service.attachment_store.class: Dothiv\BusinessBundle\Service\AttachmentStoreService
    registration.class: Dothiv\BusinessBundle\Service\Registration

services:
    clickcounter:
        class: %clickcounter.class%
        arguments:
        - %dothiv_business.clickcounter%
        - @dothiv.business.contentful.clickcounter_content

    registration:
        class: %registration.class%
        arguments:
        - @doctrine.orm.entity_manager
        - @event_dispatcher

    clock:
        class: %dothiv.businessbundle.service.clock.class%
        arguments:
        - %dothiv_business.clock_expr%
        - @event_dispatcher

    dothiv.businessbundle.service.user:
        class: %dothiv.businessbundle.service.user.class%
        arguments:
        - @dothiv.repository.user
        - @dothiv.repository.user_token
        - @clock
        - @event_dispatcher
        - 'dothiv.business.user.loginlink.requested'
        - "%charitydomain%"

    dothiv.businessbundle.service.attachment:
        class: %dothiv.businessbundle.service.attachment.class%
        arguments:
        - @dothiv.repository.attachment
        - ['application/pdf']
        - @dothiv.businessbundle.service.attachment_store

    dothiv.businessbundle.service.attachment_store:
        class: %dothiv.businessbundle.service.attachment_store.class%
        arguments:
        - %dothiv_business.attachments_location%

    dothiv.business.contentful.clickcounter_content:
        class: %dothiv.websitebase.contentful.content.class%
        arguments:
            - @dothiv_contentful.content
            - @dothiv.websitebase.contentful.view_builder
            - %contenful_space_clickcounter%
