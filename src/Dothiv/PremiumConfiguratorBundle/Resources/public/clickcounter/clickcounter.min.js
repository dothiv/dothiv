!function(){function a(){return!0}function b(b){a()&&window.console&&console.log(b)}function c(){return parseInt((/msie (\d+)/.exec(navigator.userAgent.toLowerCase())||[])[1],10)}function d(){return c()<8?!1:!0}function e(){return document.getElementById("clickcounter-target-iframe")}function f(){for(var a=document.cookie.split(";"),b=0;b<a.length;b++)if("dothivstatus=returning"==a[b])return!0;return!1}function g(){return document.cookie="dothivstatus=returning",f()?!0:!1}function h(){var b=j(),c=Date.now();if(e());else if(b){var d=parseInt("0",10);b=parseInt(b,10);var f=(c-b)/1e3;if(d>f)return}try{var g;if(window.XDomainRequest?(g=new XDomainRequest,g.onload=function(){k(g.responseText)},g.onprogress=function(){}):(g=new XMLHttpRequest,g.onreadystatechange=function(){4==g.readyState&&200==g.status&&k(g.responseText)}),a())g.open("GET",x.get("config","config.json"),!0);else{i(c);var h=document.domain.split("."),l=document.domain;h.length>=2&&(l=[h[h.length-2],h[h.length-1]].join(".")),g.open("POST","//dothiv-registry.appspot.com/c?from=outside&domain="+l+"&pt="+b+"&ct="+c,!0)}g.send()}catch(m){var n='{"secondvisit":"top","firstvisit":"top"}';k(n)}}function i(a){{var b=2592e3,c=new Date;c.setTime(c.getTime()+1e3*b)}document.cookie="dothivpt="+a+";path=/;max-age="+b+";expires="+c.toGMTString()+";"}function j(){var a="",b=document.cookie.match("dothivpt=([0-9]{13})");return b&&(a=b[1]),a}function k(a){var b=JSON.parse(a);l()&&m(b),n(b)}function l(){return!!window.postMessage}function m(c){var d=window.addEventListener?"addEventListener":"attachEvent",e=window[d],f="attachEvent"==d?"onmessage":"message";e(f,function(d){var e=document.getElementById("dothiv-clickcounter-iframe");switch(b("Message received: "+d.data),d.data){case"get config":a()?e.contentWindow.postMessage(JSON.stringify(x.overrideConfig(c)),"*"):e.contentWindow.postMessage(JSON.stringify(c),"*");break;case"remove":s()}},!1)}function n(a){domready(function(){w?p(x.get("position",a.firstvisit),a):p(x.get("position",a.secondvisit),a)})}function o(a){switch(a){case"top":case"bottom":case"left":case"right":case"premium":case"topleft-micro":case"topright-micro":case"top-micro":case"invisible":return a;default:return b("Invalid position provided: "+a),"top"}}function p(a,c){var e=o(a);return"invisible"==e?void b("Nothing to do, invisible counter."):d()?(r(e,c),q(),void t()):void b("Unsupported browser.")}function q(){var a=document.createElement("style"),b="#dothiv-clickcounter-iframe.bottom,#dothiv-clickcounter-iframe.left,#dothiv-clickcounter-iframe.premium,#dothiv-clickcounter-iframe.right,#dothiv-clickcounter-iframe.top,#dothiv-clickcounter-iframe.top-micro,#dothiv-clickcounter-iframe.topleft-micro,#dothiv-clickcounter-iframe.topright-micro,.iframe{border:none;position:fixed;z-index:2147483647}#dothiv-clickcounter-background.bottom,#dothiv-clickcounter-background.left,#dothiv-clickcounter-background.premium,#dothiv-clickcounter-background.right,#dothiv-clickcounter-background.top,.filled-background{background-color:#000;-ms-filter:'alpha(Opacity=70)';filter:alpha(opacity=70);left:0;height:100%;margin:0;opacity:.7;padding:0;position:fixed;top:0;width:100%;z-index:2147483646;display:block}#dothiv-clickcounter-background{display:none}#dothiv-clickcounter-outer{border:0;background:0;padding:0;margin:0;width:auto;height:auto;display:block;position:static}* html #dothiv-clickcounter-background,* html #dothiv-clickcounter-iframe{position:absolute}#dothiv-clickcounter-iframe.top{top:0;left:0;width:100%;height:249px}#dothiv-clickcounter-iframe.bottom{bottom:0;left:0;width:100%;height:249px}#dothiv-clickcounter-iframe.left{top:0;left:0;height:100%;width:410px}#dothiv-clickcounter-iframe.right{top:0;right:0;height:100%;width:410px}#dothiv-clickcounter-iframe.premium{top:0;left:0;width:100%;height:50%;min-height:269px}#dothiv-clickcounter-iframe.topleft-micro,#dothiv-clickcounter-iframe.topright-micro{top:0;left:0;width:100%;height:79px}#dothiv-clickcounter-iframe.top-micro{top:0;left:0;width:100%;height:149.5px}";if(a.type="text/css",a.styleSheet)a.styleSheet.cssText=b;else{var c=document.createTextNode(b);a.appendChild(c)}document.getElementsByTagName("head")[0].appendChild(a)}function r(c,d){b("Creating iframe: "+c);var e=document.createElement("iframe");e.id="dothiv-clickcounter-iframe",e.className=c,e.src=a()?"//localhost/build/clickcounter-"+c+".html?"+Date.now():"//dothiv-registry.appspot.com/static/clickcounter-"+c+".html",e.scrolling="no",e.frameBorder=0,e.allowTransparency=!0,e.setAttribute("allowtransparency","true");var f=document.createElement("div");f.id="dothiv-clickcounter-background",f.className=c,u(d)&&(f.style.backgroundColor=d.barColor);var g=document.createElement("div");g.id="dothiv-clickcounter-outer",g.style.zIndex=1,g.appendChild(f),g.appendChild(e),document.body.insertBefore(g,null)}function s(){if(a()&&"1"==x.get("reload",!1))var b=document.getElementById("dothiv-clickcounter-iframe").className;if(document.getElementById("dothiv-clickcounter-outer")&&document.body.removeChild(document.getElementById("dothiv-clickcounter-outer")),document.getElementById("dothiv-clickcounter-iframe")&&document.body.removeChild(document.getElementById("dothiv-clickcounter-iframe")),document.getElementById("dothiv-clickcounter-background")&&document.body.removeChild(document.getElementById("dothiv-clickcounter-background")),a()&&"1"==x.get("reload",!1)){var c={top:"right",right:"bottom",bottom:"left",left:"premium",premium:"topleft-micro","topleft-micro":"top-micro","top-micro":"topright-micro","topright-micro":"top"},d=x.get("rotate",!1);x.set("position","1"==d?c[b]:b),document.location.search=x.getQuery()}}function t(){document.getElementById("dothiv-clickcounter-background").onclick=function(){a()&&x.set("reload",0),s()}}function u(a){return a.hasOwnProperty("premium")&&a.premium}!function(a,b){"undefined"!=typeof module?module.exports=b():"function"==typeof define&&"object"==typeof define.amd?define(b):this[a]=b()}("domready",function(a){function b(a){for(n=1;a=d.shift();)a()}var c,d=[],e=!1,f=document,g=f.documentElement,h=g.doScroll,i="DOMContentLoaded",j="addEventListener",k="onreadystatechange",l="readyState",m=h?/^loaded|^c/:/^loaded|c/,n=m.test(f[l]);return f[j]&&f[j](i,c=function(){f.removeEventListener(i,c,e),b()},e),h&&f.attachEvent(k,c=function(){/^c/.test(f[l])&&(f.detachEvent(k,c),b())}),a=h?function(b){self!=top?n?b():d.push(b):function(){try{g.doScroll("left")}catch(c){return setTimeout(function(){a(b)},50)}b()}()}:function(a){n?a():d.push(a)}});var v=function(){if(this.prefix="dothivclickcounter",this.props={position:null,reload:!1,rotate:!1,config:null},!(window.location.search.length<1)){for(var a,c={},d=0,e=window.location.search.substr(1).split("&");d<e.length;d++)a=e[d].split("="),c[decodeURIComponent(a[0])]=a.length>1?decodeURIComponent(a[1]):"";for(var f in this.props){var g=this.prefix+"["+f+"]";c.hasOwnProperty(g)&&(b("Override for "+f+" used: "+c[g]),this.props[f]=c[g])}}};v.prototype.get=function(a,b){if(!this.props.hasOwnProperty(a))return b;var c=this.props[a];return null==c?b:c},v.prototype.set=function(a,b){return this.props.hasOwnProperty(a)?void(this.props[a]=b):defaultValue},v.prototype.getQuery=function(){var a="";for(var b in this.props)a+=(0==a.length?"?":"&")+this.prefix+"["+b+"]="+encodeURIComponent(this.props[b]);return a},v.prototype.overrideConfig=function(a){for(var b in a)a.hasOwnProperty(b)&&this.props.hasOwnProperty(b)&&(a[b]=this.props[b]);return a},"undefined"==typeof Date.now&&(Date.now=Date.now||function(){return+new Date});var w=!1;f()||(w=g()?!0:!1);var x=new v;window.setTimeout(function(){var a=e();a&&a.src&&(window.location.href=a.src)},4e3),h(w)}();